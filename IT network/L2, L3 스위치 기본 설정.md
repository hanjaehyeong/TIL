# **L2, L3 스위치 기본 설정**

**학습내용**
<li>L2, L3 스위치 내부구조와 CLI
<li>L2, L3 스위치 명령어

<br>

**학습목표**
<li>L2, L3 스위치 내부구조와 CLI를 설명할 수 있다.
<li>L2 스위치와 라우터(L3 스위치) 명령어를 설명할 수 있다.
<li>L2 스위치와 라우터(L3 스위치) 명령어를 이용하여 기본 설정을 할 수 있다.

-----

## **L2, L3 스위치 내부 구조**

### **L2, L3 스위치 메모리 특징**

**ROM**
- Bootstrap 프로그램과 Rom Monitor를 저장하고 있음
- Bootstrap 프로그램은 **부팅 절차를 수행**
- Rom Monitor는 운영체제 또는 시스템에 문제가 발생했을 경우 임시로 수행되는 **비상용 운영체제 시스템**
 
**Flash Memory**
- 시스코 네트워크 장비의 운영체제 프로그램인 IOS를 저장하고 있음
- IOS : Internetwork Operation System

**NVRAM**
- 비휘발성 메모리
- RAM과 달리 **전원이 꺼져도 내용을 유지**
- 백업설정파일인 startuo-config 파일을 저장하고 있음

**RAM**
- IOS와 설정 파일인 running-config 파일 등이 저장
- **라우팅테이블과 같은 각종 테이블**과 APR 캐시, **패킷 버퍼링**, 패킷 홀드 큐 둥의 작업 수행을 위한 데이터 영역을 제공
- 전원을 껐을 때 내용이 저장되지 않음

### **라우터 부팅 절차**

1. Power ON - 전원을 켜면 부팅 절차 시작
2. POST 수행 - 라우터는 CPU, 메모리, 인터페이스 등이 작동하는지 검증하기 위해 POST(Poer-On-Self-Test)를 실행
3. IOS 로딩
- Flash Memory로부터 IOS를 RAM으로 로딩
- IOS를 로딩하는 횟수가 다섯번을 초과하면 라우터는 ROM모드로 부팅을 시도
> ROM모드 : 시스코 IOS image 설치 및 업그레이드시 사용됨
- 시스템은 부트스트랩 소프트웨어 (boot image)를 실행하여 해당하는 IOS를 찾음
- IOS의 위치는 설정 레지스터(configuration register)셋팅에 의해 정해짐
- 레지스터의 초기값은 0x2102인테, 이는 라우터의 IOS를 Flash Memory로부터 로딩 하도록 설정해 놓는 것
4. Sartup-config 로딩
- 라우터는 설정 파일인 Startup-config 파일을 찾아서 RAM으로 로딩
- 설정 파일은 NVRAM에 저장되어 있음
- 파일을 찾을 수 없을 경우 setup 명령으를 자동 실행시켜 라우터를 설정
5. 사용자 모드 진입 - 정상적으로 IOS와 설정 파일이 RAM으로 로딩되었다면 사용자 모드로 진입

### **L2, L3 스위치 CLI**

**CLI**
- 키보드로부터 명령어를 입력 받아 프로그램을 작동시키는 사용자 인터페이스를 의미
- 명령어 해석기 기능을 수행

**CLI 모드**
사용자 모드(User Mode)
- 제한된 명령어로 구성
- 주로 상태정보를 확인할 때 사용
- 
운영자 모드(Privileged Mode)
- 모든 명령어를 사용할 수 있음
- Enable 모드라고도 함
- 시스템 환경 설정 등 시스템의 상태를 변경시키기 위해서는 사용자 모드에서 운영자 모드로 변환해야 함


### **라우터의 CLI모드**
**운영자 모드**
- **전역 설정 모드**<br>
세부적인 설정을 위해 필요한 모드<br>
config 모드라고도 함<br>
대부분의 설정 명령어가 시작되는 모드<br>
- **세부 설정 모드**<br>
Interface 모드 : 인터페이스와 관련된 설정을 하는 모드<br>
Router 모드 : 라우팅 프로토콜을 지정하기 위한 모드<br>
Line 모드 : 가상 터미널(VTY) 등 접속 환경을 설정하기 위한 모드<br>
