# ARC

objc 시절에는 메모리 관리를 직접 해줬다.(MRC) → 코드가 길어지고 복잡해진다.

ARC: 앱의 메모리 사용을 추적 및 관리를 **자동**으로 해주는 것 → 코드가 간편해졌다.

ARC에는 **retain, release**라는 개념이 있다.

**RC → 누가 자신을 가르키는지 숫자로 나타낸 것**

retain : 메모리에서 해제되지 않도록 **RC를 증가**시킴

release : 메모리에서 사용하지 않으니 해제되도록 **RC를 감소**시킴

***RC가 0이 되면 메모리에서 해제됨***

ARC가 메모리를 관리해주지 않는 몇몇의 상황 때문에 개발자가 직접 관리해줘야 한다.

메모리를 관리하기 위해서는 weak, strong, unowned라는 키워드를 프로퍼티를 만들 때 앞에 붙인다.

`strong`

- 해당 인스턴스의 소유권을 가진다.

- 변수를 선언할 때 아무것도 적지 않으면 기본적으로 strong으로 만들어진다.

- 자신이 참조하는 인스턴스의 RC를 증가시킨다.

`weak`

- 해당 인스턴스의 소유권을 가지지 않고 주소값만 가지고 있다(C언어 포인터)

- 자신이 참조하는 인스턴스의 RC를 증가시키지 않는다.

- weak를 사용할 때에는 반드시 옵셔널로 만들어 줘야 한다.

`unowned`

- 해당 인스턴스의 소유권을 가지지 않는다.

- 자신이 참조하는 인스턴스의 RC를 증가시키지 않는다.

- 옵셔널로 선언될 수 없다.

weak와 unowned의 차이

weak는 추적하던 객체가 사라지면 nil로 바뀐다.

unowned는 추적하던 객체가 사라지면 댕글링 포인터로 바뀐다.

- 댕글링 포인터
  - 추적하던 객체가 사라지면서 할당되지 않는 공간을 바라보는 포인터

---
**순환 참조**

인스턴스끼리 서로 강한 참조를 할 때 메모리 누수가 발생 할 수 있다. -> weak 사용
