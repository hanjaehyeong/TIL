# Socket, TCP, UDP

- Socket(소켓)
    
    정규 유닉스 파일 기술자를 이용하여 다른 프로그램과 정보를 교환하는 방법
    

유닉스 = 운영체제

유닉스에선 모든 것이 파일로 취급됨

유닉스의  프로그램들은 모든 입출력(Read, Write)을 할 때 **파일 기술자(File Descriptor)**라는 것을 통해 한다

- 파일 기술자(File Descriptor)
    
    열려진 파일을 의미하는 정수(인덱스) 번호
    
- 소켓 기술자(Socket Descriptor)
    
    소켓을 만들고 얻은 파일 기술자
    

서버와 소켓 통신을 하고 싶으면 `socket()`이라는 함수를 통해 생성할 수 있다.

`socket()`이라는 함수를 호출하면, 내부에서 소켓에 사용할 파일을 하나 연다.

그 파일의 index 번호(소켓 기술자, Socket Descriptor)를 return 해준다.

**이 소켓 기술자(Socket Descriptor)에 `send()`,`recv()`를 하며 통신한다.**

소켓 기술자는 열려진 파일의 index이므로 정수형이다.

A라는 소켓을 만들면 소켓 기술자는 3,

B라는 소켓을 만들면 소켓 기술자는 4이다.

(파일 기술자의 0, 1, 2는 이미 할당되어 있어서 3부터 쓸 수 있다.)

소켓에서 데이터를 보내기 위해 사용하는 프로토콜

- 패킷
    
    하나의 온전한 데이터 뭉텅이가 아니다.
    
    데이터를 보낼 때 효율성을 위해 조각 조각 내서 나누어 보낸다. 
    
    그 **조각 조각 나눠진 데이터를 패킷이라고 한다.**
    
- TCP(스트림 소켓)
    
    데이터를 메세지 형태로 보내기 위해 IP와 함께 사용하는 프로토콜 
    
    IP가 데이터 배달을 처리
    
    TCP는 패킷을 추적, 관리
    
    데이터가 온전히 갔는지 확인하기 위하여 TCP는 패킷에 번호를 부여해서 패킷이 중간에 손실됐는지 확인 하고, 목적지에서 나누어진 패킷이 다시 온전한 데이터가 될 수 있도록 재조립을 한다.
    
- TCP 소켓의 특징
    1. 연속적으로 데이터를 주고받을 때 보다 신뢰성 있는 연결을 중시할 때 사용한다.
    2. 연결형 서비스로 안정성, 신뢰성을 보장한다.
    3. 발신자와 수신자를 연결하여 논리적 경로(가상 회선 방식)을 배정한다.
    4. 3-Way Handshake 방식을 통해 연결을 맺고, 4-Way Handshake를 통해 해제한다.
    5. 서버가 응답을 주지 않으면 계속적으로 요청하게 된다.
    6. 서로 데이터를 주고받을 수 있는 양방향 통신이며, 일대일 통신(unicast)이다.
    7. 패킷의 순서는 정확이 유지되고, 에로도 교정된다.
    8. 데이터 흐름 제어 및 혼합 제어가 가능하다.
    9. UDP 보다 속도가 느리다.
- UDP(데이터그램 소켓)
    
    데이터를 데이터그램 단위로 처리한다.
    
    데이터그램은 독립적인 단계를 지니는 패킷이다.
    
    비연결형 소켓이므로 연결을 위해 할당되는 논리적 경로가 없다.
    
    따라서, 데이터들이 서로 다른 경로로 전송되고 실제로 보낸 순서대로 도착하지 않을 수도 있다.
    
- UDP 소켓의 특징
    1. 비연결형 서비스로 데이터그램 방식을 제공한다.
    2. 정보를 주고받을 때, Handshake와 같은 신호 정차를 거치지 않는다.
    3. UPD Headaer의 CheckSum을 통해 최소한의 에러만 검출한다.
    4. 일대일 통신(Unicast), 일대다 통신(broadcast), 다대다 통신(multicast)
    5. 데이터가 제대로 도착할 수도, 중간에 유실될 수도, 순서가 바뀌어 도착할 수도 있다.
    6. TCP보다 속도가 빠르다.
    7. 신뢰성이 낮다.